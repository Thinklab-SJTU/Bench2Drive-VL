"use strict";(self.webpackChunkb_2_dvl_docs_site=self.webpackChunkb_2_dvl_docs_site||[]).push([[6753],{2867:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"tutorial/set-up-env","title":"Set Up the Environment","description":"This page includes preparations before running our project.","source":"@site/versioned_docs/version-0.0/tutorial/set-up-env.md","sourceDirName":"tutorial","slug":"/tutorial/set-up-env","permalink":"/Bench2Drive-VL/docs/tutorial/set-up-env","draft":false,"unlisted":false,"tags":[],"version":"0.0","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Tutorial","permalink":"/Bench2Drive-VL/docs/category/tutorial"},"next":{"title":"Generate VQAs","permalink":"/Bench2Drive-VL/docs/tutorial/generate-vqa"}}');var i=t(4848),s=t(8453);const o={sidebar_position:1},a="Set Up the Environment",l={},c=[{value:"Install CARLA",id:"install-carla",level:2},{value:"Configure the environment",id:"configure-the-environment",level:2},{value:"Activate the environment",id:"activate-the-environment",level:2}];function d(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"set-up-the-environment",children:"Set Up the Environment"})}),"\n",(0,i.jsx)(n.p,{children:"This page includes preparations before running our project."}),"\n",(0,i.jsx)(n.h2,{id:"install-carla",children:"Install CARLA"}),"\n",(0,i.jsx)(n.p,{children:"Before doing anything, CARLA must be installed."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'mkdir carla\ncd carla\nwget https://carla-releases.s3.us-east-005.backblazeb2.com/Linux/CARLA_0.9.15.tar.gz\ntar -xvf CARLA_0.9.15.tar.gz\ncd Import && wget https://carla-releases.s3.us-east-005.backblazeb2.com/Linux/AdditionalMaps_0.9.15.tar.gz\ncd .. && bash ImportAssets.sh\nexport CARLA_ROOT=YOUR_CARLA_PATH\necho "$CARLA_ROOT/PythonAPI/carla/dist/carla-0.9.15-py3.7-linux-x86_64.egg" >> YOUR_CONDA_PATH/envs/YOUR_CONDA_ENV_NAME/lib/python3.7/site-packages/carla.pth # python 3.8 also works well, please set YOUR_CONDA_PATH and YOUR_CONDA_ENV_NAME\n'})}),"\n",(0,i.jsx)(n.admonition,{title:"CARLA issues",type:"caution",children:(0,i.jsx)(n.p,{children:"CARLA has complex dependencies and is not stable. Please check the issue section of CARLA very carefully."})}),"\n",(0,i.jsx)(n.h2,{id:"configure-the-environment",children:"Configure the environment"}),"\n",(0,i.jsxs)(n.p,{children:["After installing CARLA, write an ",(0,i.jsx)(n.code,{children:"env.sh"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",metastring:'title="env.sh"',children:"export CARLA_ROOT=/path/to/your/carla\n\nexport CARLA_SERVER=${CARLA_ROOT}/CarlaUE4.sh\nexport PYTHONPATH=${CARLA_ROOT}/PythonAPI\nexport PYTHONPATH=$PYTHONPATH:${CARLA_ROOT}/PythonAPI/carla\nexport PYTHONPATH=$PYTHONPATH:$CARLA_ROOT/PythonAPI/carla/dist/carla-0.9.15-py3.7-linux-x86_64.egg\n\nexport WORK_DIR=/path/to/Bench2Drive-VL/repo\nexport PYTHONPATH=$PYTHONPATH:${WORK_DIR}/scenario_runner\nexport PYTHONPATH=$PYTHONPATH:${WORK_DIR}/leaderboard\nexport PYTHONPATH=$PYTHONPATH:${WORK_DIR}/B2DVL_Adapter\nexport SCENARIO_RUNNER_ROOT=${WORK_DIR}/scenario_runner\nexport LEADERBOARD_ROOT=${WORK_DIR}/leaderboard\n\nexport VQA_GEN=1\nexport STRICT_MODE=1\n"})}),"\n",(0,i.jsx)(n.admonition,{title:"Environment Variables",type:"info",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"VQA_GEN:"})," Must set to a value > 0 to tell the framework that we are currently in Bench2Drive-VL environment."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"STRICT_MODE:"})," DriveCommenter drives the ego vehicle after circumventing obstacles back to its original lane and handle more out of distribution situations if ",(0,i.jsx)(n.code,{children:"STRICT_MODE > 0"}),". Must set to true if doing a closed-loop evaluation."]}),"\n"]})}),"\n",(0,i.jsx)(n.h2,{id:"activate-the-environment",children:"Activate the environment"}),"\n",(0,i.jsx)(n.p,{children:"Make sure you source this script before running:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"source ./env.sh\n"})})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>a});var r=t(6540);const i={},s=r.createContext(i);function o(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);