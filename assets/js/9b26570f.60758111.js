"use strict";(self.webpackChunkb_2_dvl_docs_site=self.webpackChunkb_2_dvl_docs_site||[]).push([[8708],{1714:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"references/eval-config","title":"Evaluation Configurations","description":"Evaluation module\'s configurations.","source":"@site/docs/references/eval-config.md","sourceDirName":"references","slug":"/references/eval-config","permalink":"/Bench2Drive-VL/docs/next/references/eval-config","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Inference Configurations","permalink":"/Bench2Drive-VL/docs/next/references/inference-config"},"next":{"title":"Adapt New VLMs","permalink":"/Bench2Drive-VL/docs/next/references/adapt-vlm"}}');var t=i(4848),o=i(8453);const r={sidebar_position:4},l="Evaluation Configurations",c={},a=[{value:"Example",id:"example",level:2},{value:"Fields",id:"fields",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"evaluation-configurations",children:"Evaluation Configurations"})}),"\n",(0,t.jsx)(n.p,{children:"Evaluation module's configurations."}),"\n",(0,t.jsx)(n.h2,{id:"example",children:"Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",metastring:'title="eval_config.json"',children:'{\n    "EVAL_SUBSET": true, // eval a subset of given infer result folder\n    "USE_CHECKPOINT": false, // use a file to record evaluation process\n    "SUBSET_FILE": "./eval_configs/subset.txt", // subset file\n    "CHECKPOINT_FILE": "./eval_configs/finished_scenarios.txt", // checkpoint file\n    "INFERENCE_RESULT_DIR": "./infer_results", // path to inference results\n    // when doing closed-loop inference, this dir is ./output/infer_results/model_name+input_mode\n    "B2D_DIR": "/path/to/Bench2Drive/dataset", // evaluation script uses annotations in b2d,\n    // when doing closed-loop inference, this dir is ./eval_v1(SAVE_PATH you specified)/model_name+input_mode\n    "ORIGINAL_VQA_DIR": "../Carla_Chain_QA/carla_vqa_gen/vqa_dataset/outgraph",\n    // when doing closed-loop inference, this dir is ./output/vqagen/model_name+input_mode\n    "FRAME_PER_SEC": 10, // sensor fps\n    "LOOK_FUTURE": false // not used now, to be removed\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"fields",children:"Fields"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"INFER_SUBSET"})," (type: ",(0,t.jsx)(n.code,{children:"bool"}),"): Whether inference a subset of given infer result folder or not."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"USE_CHECKPOINT"})," (type: ",(0,t.jsx)(n.code,{children:"bool"}),"): Whether use a checkpoint file to record the process of inference, so that B2DVL only inference scenarios which are not in the checkpoint file."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"SUBSET_FILE"})," (type: ",(0,t.jsx)(n.code,{children:"str"}),"): Path to the subset file. You can leave blank if not used."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"CHECKPOINT_FILE"})," (type: ",(0,t.jsx)(n.code,{children:"str"}),"): Path to the checkpoint file. You can leave blank if not used."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"INFERENCE_RESULT_DIR"})," (type: ",(0,t.jsx)(n.code,{children:"str"}),"): Path to inference results folder. When doing closed-loop inference, this dir is ",(0,t.jsx)(n.code,{children:"./output/infer_results/model_name+input_mode"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"B2D_DIR"})," (type: ",(0,t.jsx)(n.code,{children:"str"}),"): Path to original Bench2Drive dataset. Evaluation script uses annotations in B2D. When doing closed-loop inference, this dir is ",(0,t.jsx)(n.code,{children:"${SAVE_PATH}/model_name+input_mode"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"ORIGINAL_VQA_DIR"})," (type: ",(0,t.jsx)(n.code,{children:"str"}),"): Path to the VQAs generated by DriveCommenter. When doing closed-loop inference, this dir is ",(0,t.jsx)(n.code,{children:"./output/vqagen/model_name+input_mode"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"FRAME_PER_SEC"})," (type: ",(0,t.jsx)(n.code,{children:"int"}),"): The sampling rate of the sensors."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"LOOK_FUTURE"})," (type: ",(0,t.jsx)(n.code,{children:"bool"}),"): Not used now, to be removed."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{title:"subset and checkpoint",type:"info",children:(0,t.jsxs)(n.p,{children:["The grammar of subset file and checkpoint file is same as one in ",(0,t.jsx)(n.a,{href:"/Bench2Drive-VL/docs/next/references/inference-config#subset-file",children:"open-loop inference"}),"."]})}),"\n",(0,t.jsx)(n.admonition,{title:"Special reminder for early-stop",type:"warning",children:(0,t.jsxs)(n.p,{children:["When getting the ",(0,t.jsx)(n.a,{href:"/Bench2Drive-VL/docs/next/references/baselines",children:"baseline data"}),", we used a 80s early-stop to avoid wasting time on failed scenarios. This is controlled by the ",(0,t.jsx)(n.code,{children:"EARLY_STOP"})," environment variable in the ",(0,t.jsx)(n.a,{href:"/Bench2Drive-VL/docs/next/tutorial/closed-loop-inference#write-a-start-up-script",children:"start up script"}),". But when calculating driving score from CARLA, a 0.7 penalty will be multiplied to it",(0,t.jsx)(n.a,{href:"https://leaderboard.carla.org/evaluation_v2_0/",children:"(reference)"}),". In final calculation of baseline, we eliminated it by dividing 0.7."]})})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>l});var s=i(6540);const t={},o=s.createContext(t);function r(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);